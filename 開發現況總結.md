「今天吃什麼？」App 開發現況總結
這是一份為了讓接手的開發者或 AI 協作者能快速理解專案而撰寫的文件。本文件將概述專案的核心需求、技術架構，以及從原型至今各階段的主要更新。

一、 專案核心需求 (Core Requirements)
互動式地圖探索: 讓使用者在真實地圖上，透過拖曳手把直觀地「畫」出一個圓形的美食探索半徑。

智慧美食分類: 自動抓取範圍內的所有餐廳，並透過後端 AI 進行智慧分類。

沉浸式探索流程: 無縫地瀏覽店家列表與地圖資訊，不應有頻繁的頁面跳轉來打斷体験。

充滿儀式感的決策工具: 提供「命運羅盤」等模式，幫助使用者做出最終決定。

各版本主要更新
... (v1-v8 的歷史紀錄維持不變) ...

===v8===
此版本是一次全面的使用者體驗優化迭代，專注於提升地圖互動的流暢度與直覺性，並重構了「調整範圍」模式的使用流程。

核心體驗優化:

高精準度定位: 啟用 enableHighAccuracy 選項，優先使用 GPS 進行定位。

地圖資訊增強: 為初始的「探索圈」頁面地圖加入路名圖層。

智慧地圖聚焦: 重新設計了地圖的飛行動畫邏輯，將目標 marker 精準地置於視野上半部的視覺中心，避免被底部 UI 遮擋。

「調整範圍」模式重構:

介面重構: 全面重新設計了調整範圍模式的底部 UI，並新增了不透明的提示文字區塊。

宏觀視野: 進入此模式時，地圖會自動縮放至剛好能完整顯示整個探索圈的視野。

===v9===
此版本的核心是新增並深度優化「地點搜尋」功能，同時修正了前一版本遺留的版面問題，大幅提升了 App 的實用性與互動精緻度。

後端：新增地理編碼 API (Geocoding)

動機: 讓使用者能透過輸入文字來設定探索圈的中心點。

實現: 在 backend/routes.py 中新增了 /api/geocode 端點，它會接收前端的查詢字串，並呼叫 Maps_service.py 中的新函式 geocode_address，將地址或地標轉換為精確的經緯度後回傳。

前端：沉浸式地點搜尋 UI/UX

動機: 以一種不打擾核心操作、且符合 App 整體風格的方式，將搜尋功能整合至「探索圈」與「調整範圍」頁面。

UI/UX 實現:

初始狀態: 在「探索圈」頁面，搜尋功能以一個位於標題下方的半透明圖示呈現。

展開動畫: 點擊圖示後，搜尋欄會以緩和的動畫（0.7秒）從中心向兩側展開，同時搜尋圖示本身會平滑地移動到搜尋欄的左側，形成一個視覺統一的元件，此設計完美解決了圖示遮擋輸入框的問題。

情境式定位: 透過在 js/ui.js 中動態增減 CSS class (.in-edit-mode)，實現了搜尋元件在「探索圈」頁面（較低位置）和「調整範圍」頁面（較高位置）之間的高度變化，確保在不同場景下都有最佳的視覺佈局。

技術實現:

Debounce: 在 js/handlers.js 中，對搜尋輸入事件採用了 Debounce 技術，避免了使用者在快速輸入時頻繁觸發 API 請求，優化了效能。

元件共享: 搜尋功能的 HTML (index.html)、CSS (_search_location.css) 和 JavaScript 邏輯 (handlers.js, ui.js) 被設計為可重用元件，透過 JavaScript 動態地在不同頁面情境下移動和賦予功能。

前端：版面修正與 Bug 修復

動機: 解決 v8 版本中，「美食地圖」頁面底部控制面板在特定情況下會分離的佈局問題。

執行:

CSS 結構修復: 在 css/pages/_categories_page.css 中，將底部元件的佈局邏輯從錯誤的 Flexbox 結構改回使用 position: absolute 定位，確保了分類列表和主按鈕永遠固定在畫面下方，恢復了原始的穩定設計。

JS 邏輯修正: 在 js/ui.js 的 toggleRadiusEditMode 函式中，修正了進入編輯模式後，未能完全隱藏「美食地圖」標題的 Bug。

四、 未來開發方向 (Future Development)
(經本次重構後，架構更穩固，未來可專注於功能擴展)

數據持久化: 使用 localStorage 讓使用者的「候選清單」與「篩選偏好」在重新整理後依然存在。

性能優化: 當範圍內餐廳過多時，地圖上的標記點可能影響效能。可研究引入 Marker Clustering (標記點聚合) 技術。

PWA (Progressive Web App): 增加 Manifest 和 Service Worker，讓使用者可以將 Web App 「安裝」到手機主畫面上。